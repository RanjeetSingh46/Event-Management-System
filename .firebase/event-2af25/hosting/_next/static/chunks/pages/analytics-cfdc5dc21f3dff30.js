(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{8178:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/analytics",function(){return s(4499)}])},4499:function(e,t,s){"use strict";s.r(t);var a=s(5893),i=s(7294),n=s(4e3),c=s(7747),r=s(2757),l=s(2177),d=s(109),h=s(2305),u=s(5454),x=s(4206),o=s(2154),j=s(4283),f=s(6910),m=s(3447),w=s(5592),y=s(1065);t.default=()=>{let[e,t]=(0,i.useState)([]),[s,_]=(0,i.useState)({total:0,active:0}),[b,v]=(0,i.useState)([]),[p,E]=(0,i.useState)(!0),[X,g]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(async()=>{try{let e=(0,d.hJ)(y.db,"events"),s=(await (0,d.PL)(e)).docs.reduce((e,t)=>{let{category:s}=t.data();return e[s]=(e[s]||0)+1,e},{});t(Object.entries(s).map(e=>{let[t,s]=e;return{name:t,value:s}}));let a=(0,d.hJ)(y.db,"users"),i=(await (0,d.PL)(a)).size,n=await (0,d.PL)((0,d.IO)(a,(0,d.ar)("lastActive",">=",new Date(Date.now()-2592e6))));_({total:i,active:n.size});let c=(0,d.IO)(e,(0,d.Xo)("attendees","desc"),(0,d.b9)(5)),r=await (0,d.PL)(c);v(r.docs.map(e=>({id:e.id,...e.data()})))}catch(e){g("Failed to fetch analytics data."),console.error("Error fetching analytics:",e)}finally{E(!1)}})()},[]),p)?(0,a.jsx)(n.x,{children:"Loading analytics..."}):X?(0,a.jsx)(n.x,{color:"red.500",children:X}):(0,a.jsxs)(c.xu,{p:5,children:[(0,a.jsx)(r.X,{mb:5,children:"Analytics Dashboard"}),(0,a.jsxs)(l.M,{columns:2,spacing:10,children:[(0,a.jsxs)(c.xu,{children:[(0,a.jsx)(r.X,{size:"md",mb:3,children:"Event Categories"}),(0,a.jsx)(h.h,{width:"100%",height:300,children:(0,a.jsxs)(u.v,{data:e,children:[(0,a.jsx)(x.q,{strokeDasharray:"3 3"}),(0,a.jsx)(o.K,{dataKey:"name"}),(0,a.jsx)(j.B,{}),(0,a.jsx)(f.u,{}),(0,a.jsx)(m.D,{}),(0,a.jsx)(w.$,{dataKey:"value",fill:"#8884d8"})]})})]}),(0,a.jsxs)(c.xu,{children:[(0,a.jsx)(r.X,{size:"md",mb:3,children:"User Statistics"}),(0,a.jsxs)(n.x,{children:["Total Users: ",s.total]}),(0,a.jsxs)(n.x,{children:["Active Users (last 30 days): ",s.active]})]})]}),(0,a.jsxs)(c.xu,{mt:10,children:[(0,a.jsx)(r.X,{size:"md",mb:3,children:"Top 5 Events"}),b.map((e,t)=>(0,a.jsxs)(n.x,{children:[t+1,". ",e.title," - ",e.attendees.length," attendees"]},e.id))]})]})}}},function(e){e.O(0,[928,888,774,179],function(){return e(e.s=8178)}),_N_E=e.O()}]);